
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- MODIFICAR: T√≠tulo de la pesta√±a del navegador -->
  <title>¬°Atrapa los Corazones Danielita üíñ!</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  
  <link rel="icon" href="icon/favicon-32x32.png" type="image/x-icon">
</head>
<body class="bg-gradient-to-br from-pink-200 via-red-100 to-gray-100 flex items-center justify-center min-h-screen">
<!-- MODIFICAR: Textos del modal de inicio -->
<div id="start-modal-overlay" class="fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center z-50 p-4">
  <div id="start-modal" class="bg-white/90 rounded-2xl p-6 sm:p-8 shadow-xl text-center max-w-md w-full transform transition-all opacity-100 scale-100">
    <h2 class="text-3xl sm:text-4xl text-pink-500 font-['Pacifico']">Un Juego Para Ti ‚ù§Ô∏è</h2>
    <p class="mt-4 text-gray-600 text-base sm:text-lg">
      He creado este peque√±o mundo solo para ti mi amor ü•∫üíñ. El objetivo es simple: usa tu arco para flechar los corazoncitos que revolotean por la pantalla.
    </p>
    <p class="mt-2 text-gray-700 font-semibold">
      Cada vez que aciertes, ¬°descubrir√°s un mensajito especial ‚úâüíò!
      Espero que te guste Daniela ü•∫
    </p>
    <p class="mt-6 text-sm text-gray-500">
      (Arrastra el arco para apuntar y su√©ltalo para lanzar la flecha üòâ)
    </p>
    <button id="start-game-button" class="mt-8 px-8 py-3 bg-pink-500 text-white font-bold rounded-full shadow-lg hover:bg-pink-600 transition-transform transform hover:scale-105 text-lg">
      ¬°Vamos mi amor tu puedes ü•∞üëë!
    </button>
  </div>
</div>

<div id="counters-container" class="absolute top-2 right-2 sm:top-4 sm:right-4 flex gap-2 sm:gap-4">
  <div class="text-center bg-white/50 backdrop-blur-sm p-2 sm:p-3 rounded-lg shadow-md">
    <div class="text-base sm:text-xl text-gray-600 font-semibold">Flechas:</div>
    <div id="shot-counter" class="text-3xl sm:text-4xl text-pink-500 font-bold">10</div>
  </div>
  <div class="text-center bg-white/50 backdrop-blur-sm p-2 sm:p-3 rounded-lg shadow-md">
    <div class="text-base sm:text-xl text-gray-600 font-semibold">Aciertos:</div>
    <div id="hits-counter" class="text-3xl sm:text-4xl text-green-500 font-bold">0</div>
  </div>
</div>

<div id="hearts-area"></div>

<h1 id="message" class="text-3xl sm:text-4xl md:text-5xl text-gray-700"></h1>

<div id="bow-container">
  <svg id="bow" viewBox="0 0 100 200">
    <path d="M 90 10 C 30 60, 30 140, 90 190" stroke="#8B4513" stroke-width="5" fill="none"/>
    <line x1="90" y1="10" x2="90" y2="190" stroke="#D2B48C" stroke-width="2" />
  </svg>
</div>

<div id="arrow">
  <svg viewBox="0 0 100 20">
    <line x1="0" y1="10" x2="90" y2="10" stroke="#A0522D" stroke-width="3" />
    <path d="M 85 5 L 95 10 L 85 15" stroke="#A0522D" stroke-width="3" fill="none" />
  </svg>
</div>

<div id="controls-container" class="absolute bottom-4 left-1/2 -translate-x-1/2 z-40">
  <button id="restart-button" class="px-6 py-3 bg-white/70 backdrop-blur-sm text-pink-500 font-semibold rounded-lg shadow-md hover:bg-white transition-all text-lg">
    Jugar de Nuevo
  </button>
</div>

<canvas id="confetti-canvas"></canvas>

<script>
    const message = document.getElementById('message');
const canvas = document.getElementById('confetti-canvas');
const ctx = canvas.getContext('2d');
const bowContainer = document.getElementById('bow-container');
const arrow = document.getElementById('arrow');
const shotCounterElement = document.getElementById('shot-counter');
const hitsCounterElement = document.getElementById('hits-counter');
const heartsArea = document.getElementById('hearts-area');
const restartButton = document.getElementById('restart-button');
const startModalOverlay = document.getElementById('start-modal-overlay');
const startGameButton = document.getElementById('start-game-button');

let isDragging = false;
let startDrag = { x: 0, y: 0 };
let pullDistance = 0;
let angle = 0;
const maxPull = 100;
let arrowAnimationId = null;
let heartsAnimationId = null;

// MODIFICAR: N√∫mero de flechas disponibles
let shotsLeft = 10;
let heartsHit = 0;
// MODIFICAR: N√∫mero de corazones que aparecen
const heartsToCreate = 7;
let hearts = [];
let canShoot = false; // El disparo est√° deshabilitado hasta que empieza el juego
let isGameOver = false;

// MODIFICAR: Frases que aparecen al acertar a un coraz√≥n
const lovePhrases = [
    "Lo que siento por ti, es ternura y pasi√≥n.ü§≠",
    "T√∫ me has hecho sentir, que hay en mi coraz√≥n, tanto amor, tanto amor ü•∫üíï",
    "Mi ni√±a bonita, mi dulce princesa üíï",
    "Eres mi raz√≥n de sonre√≠r cada d√≠a. üòä‚ù§Ô∏è",
    "Daniela, en tus ojos encontr√© mi hogar. üè°üíñ",
    "Eres mi paz en un mundo ca√≥tico. üåéü§ç",
    "A tu lado, todo cobra sentido eterno. ‚ôæÔ∏èüíï",
    "Eres mi presente, futuro y m√°s all√°. ‚è≥‚ù§Ô∏è",
    " contigo aprend√≠ lo que es amar. üåπ‚ú®",
    "Mi coraz√≥n late fuerte solo por ti. üíìü•∞"
];

const confettiCount = 150;
const colors = ['#f44336', '#e91e63', '#9c27b0', '#673ab7', '#3f51b5', '#2196f3', '#ff9800'];
const confetti = [];
function resizeCanvas() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
class ConfettiParticle { constructor(x, y) { this.x = x; this.y = y; this.radius = Math.random() * 6 + 2; this.color = colors[Math.floor(Math.random() * colors.length)]; this.angle = Math.random() * Math.PI * 2; this.speed = Math.random() * 5 + 2; this.friction = 0.97; this.gravity = 0.1; this.alpha = 1; this.decay = Math.random() * 0.015 + 0.005; this.vx = Math.cos(this.angle) * this.speed; this.vy = Math.sin(this.angle) * this.speed - 3; } update() { this.x += this.vx; this.y += this.vy; this.vx *= this.friction; this.vy += this.gravity; this.alpha -= this.decay; } draw() { ctx.save(); ctx.globalAlpha = this.alpha; ctx.fillStyle = this.color; ctx.translate(this.x, this.y); ctx.beginPath(); ctx.arc(0, 0, this.radius, 0, Math.PI * 2, false); ctx.fill(); ctx.restore(); } }
function animateConfetti() { ctx.clearRect(0, 0, canvas.width, canvas.height); for (let i = confetti.length - 1; i >= 0; i--) { const p = confetti[i]; p.update(); p.draw(); if (p.alpha <= 0) { confetti.splice(i, 1); } } if (confetti.length > 0) requestAnimationFrame(animateConfetti); }

function createHearts() {
    for (let i = 0; i < heartsToCreate; i++) {
        const heartEl = document.createElement('div');
        heartEl.classList.add('heart-target');
        heartEl.id = `heart-${i}`;

        const isMobile = window.innerWidth < 640;
        const heartSize = isMobile ? 50 : 80;
        const topMargin = 40;
        const bottomMargin = 80;
        const spawnAreaHeight = window.innerHeight - topMargin - bottomMargin - heartSize;

        const top = Math.random() * Math.max(0, spawnAreaHeight) + topMargin;
        const left = (Math.random() * (isMobile ? 0.4 : 0.5) + (isMobile ? 0.5 : 0.4)) * window.innerWidth;

        heartEl.style.top = `${top}px`;
        heartEl.style.left = `${left}px`;
        heartEl.innerHTML = `<svg class="w-full h-full text-red-500 drop-shadow-lg" fill="currentColor" viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>`;
        heartsArea.appendChild(heartEl);

        hearts.push({ id: i, element: heartEl, phrase: lovePhrases[i % lovePhrases.length], isHit: false, x: left, y: top, vx: (Math.random() - 0.5) * 2, vy: (Math.random() - 0.5) * 2 });
    }
}

function animateHearts() {
    const isMobile = window.innerWidth < 640;
    hearts.forEach(heart => {
        if (!heart.isHit) {
            heart.x += heart.vx;
            heart.y += heart.vy;

            const heartSize = isMobile ? 50 : 80;
            const topMargin = 40;
            const bottomMargin = 80;

            const playAreaRight = window.innerWidth - heartSize;
            const playAreaLeft = window.innerWidth * (isMobile ? 0.45 : 0.3);

            if (heart.x > playAreaRight || heart.x < playAreaLeft) heart.vx *= -1;

            const topBoundary = topMargin;
            const bottomBoundary = window.innerHeight - bottomMargin - heartSize;

            if (heart.y < topBoundary || heart.y > bottomBoundary) {
                heart.vy *= -1;
                heart.y = Math.max(topBoundary, Math.min(heart.y, bottomBoundary));
            }

            heart.element.style.left = `${heart.x}px`;
            heart.element.style.top = `${heart.y}px`;
        }
    });
    heartsAnimationId = requestAnimationFrame(animateHearts);
}

function updateCounters() { shotCounterElement.textContent = shotsLeft; hitsCounterElement.textContent = heartsHit; }
function displayPhrase(phrase) { message.textContent = phrase; message.classList.add('visible'); setTimeout(() => { message.classList.remove('visible'); }, 2500); }
function explode(targetElement) { const rect = targetElement.getBoundingClientRect(); const originX = rect.left + rect.width / 2; const originY = rect.top + rect.height / 2; for (let i = 0; i < confettiCount; i++) { confetti.push(new ConfettiParticle(originX, originY)); } targetElement.classList.add('exploded'); if (confetti.length > 0) { animateConfetti(); } }

function checkGameOver() {
    if ((shotsLeft <= 0 && heartsHit < heartsToCreate) || heartsHit === heartsToCreate) {
        isGameOver = true;
        canShoot = false;
        arrow.style.display = 'none';
        bowContainer.style.display = 'none';
        setTimeout(() => { message.textContent = heartsHit === heartsToCreate ? "¬°Felicidades mi reina hermosa üëë‚ù§Ô∏è! ¬°Acertaste a todos!" : "¬°Buen intento mi amor ü•∞‚ù§Ô∏è! Int√©ntalo de nuevo."; message.classList.add('visible'); }, 1500);
    }
}

function handleStart(e) { if (!canShoot || isGameOver) return; isDragging = true; startDrag.x = e.type.includes('mouse') ? e.clientX : e.touches[0].clientX; startDrag.y = e.type.includes('mouse') ? e.clientY : e.touches[0].clientY; arrow.classList.add('dragging'); arrow.style.transition = 'none'; bowContainer.style.transition = 'none'; e.preventDefault(); }
function handleMove(e) { if (!isDragging || !canShoot) return; const currentX = e.type.includes('mouse') ? e.clientX : e.touches[0].clientX; const currentY = e.type.includes('mouse') ? e.clientY : e.touches[0].clientY; const bowRect = bowContainer.getBoundingClientRect(); const bowCenterY = bowRect.top + bowRect.height / 2; angle = Math.atan2(currentY - bowCenterY, currentX - (bowRect.left + 30)); pullDistance = Math.min(maxPull, Math.hypot(currentX - startDrag.x, currentY - startDrag.y)); const rotation = `rotate(${angle}rad)`; bowContainer.style.transform = `translateY(-50%) ${rotation}`; arrow.style.transform = `translateY(-50%) ${rotation} translateX(${-pullDistance}px)`; }
function handleEnd() { if (!isDragging || !canShoot) return; isDragging = false; arrow.classList.remove('dragging'); arrow.style.transition = 'transform 0.1s ease-out, left 0.5s linear, top 0.5s linear, opacity 0.5s'; bowContainer.style.transition = 'transform 0.3s ease-out'; if (pullDistance > 20) { shootArrow(); } else { resetArrowAndBow(); } }
function shootArrow() { if (!canShoot) return; canShoot = false; shotsLeft--; updateCounters(); arrow.style.pointerEvents = 'none'; const releaseAngle = angle; const force = 500 + (pullDistance * 5); animateFlight(releaseAngle, force); }

function animateFlight(flightAngle, force) {
    let arrowElem = arrow; let currentX = arrowElem.offsetLeft; let currentY = arrowElem.offsetTop; const vx = Math.cos(flightAngle) * (force / 20); const vy = Math.sin(flightAngle) * (force / 20);
    function flightLoop() {
        currentX += vx; currentY += vy; arrowElem.style.left = `${currentX}px`; arrowElem.style.top = `${currentY}px`; const arrowRect = arrowElem.getBoundingClientRect();
        for (const heart of hearts) {
            if (!heart.isHit) {
                const heartRect = heart.element.getBoundingClientRect();
                if (arrowRect.right > heartRect.left && arrowRect.left < heartRect.right && arrowRect.bottom > heartRect.top && arrowRect.top < heartRect.bottom) {
                    heart.isHit = true; heartsHit++; updateCounters(); explode(heart.element); displayPhrase(heart.phrase); arrowElem.style.opacity = '0'; setTimeout(resetArrowAndBow, 1000); return;
                }
            }
        }
        if (arrowRect.right < 0 || arrowRect.left > window.innerWidth || arrowRect.bottom < 0 || arrowRect.top > window.innerHeight) { arrowElem.style.opacity = '0'; setTimeout(resetArrowAndBow, 500); return; }
        arrowAnimationId = requestAnimationFrame(flightLoop);
    }
    flightLoop();
}

function resetArrowAndBow() {
    cancelAnimationFrame(arrowAnimationId); checkGameOver(); if (isGameOver) return;
    arrow.style.transition = 'none'; bowContainer.style.transition = 'none';
    arrow.style.left = ''; arrow.style.top = '50%'; arrow.style.opacity = '1'; arrow.style.pointerEvents = 'auto';
    const initialTransform = 'translateY(-50%) rotate(0rad)'; arrow.style.transform = `${initialTransform} translateX(0px)`; bowContainer.style.transform = initialTransform;
    pullDistance = 0; angle = 0; canShoot = true;
}

function restartGame() {
    cancelAnimationFrame(heartsAnimationId); cancelAnimationFrame(arrowAnimationId);
    heartsArea.innerHTML = ''; hearts = [];
    shotsLeft = 10; heartsHit = 0; isGameOver = false; canShoot = true;
    updateCounters(); message.classList.remove('visible'); message.textContent = '';
    arrow.style.display = 'block'; bowContainer.style.display = 'block';
    resetArrowAndBow(); createHearts(); animateHearts();
}

function initGameElements() {
    resizeCanvas(); createHearts(); updateCounters(); animateHearts();
}

function showGame() {
    bowContainer.style.display = 'block'; arrow.style.display = 'block';
    document.getElementById('counters-container').style.display = 'flex';
    document.getElementById('controls-container').style.display = 'block';
    canShoot = true;
    initGameElements();
}

function hideStartModal() {
    startModalOverlay.style.transition = 'opacity 0.5s ease';
    startModalOverlay.style.opacity = '0';
    setTimeout(() => { startModalOverlay.style.display = 'none'; }, 500);
}

// --- Event Listeners ---
startGameButton.addEventListener('click', () => { hideStartModal(); showGame(); });
arrow.addEventListener('mousedown', handleStart);
document.addEventListener('mousemove', handleMove);
document.addEventListener('mouseup', handleEnd);
arrow.addEventListener('touchstart', handleStart, { passive: false });
document.addEventListener('touchmove', handleMove);
document.addEventListener('touchend', handleEnd);
restartButton.addEventListener('click', restartGame);
window.addEventListener('resize', resizeCanvas);

// --- Initial State ---
bowContainer.style.display = 'none';
arrow.style.display = 'none';
document.getElementById('counters-container').style.display = 'none';
document.getElementById('controls-container').style.display = 'none';
 
document.addEventListener('DOMContentLoaded', function() {
        const audio = document.getElementById('backgroundMusic');
        
        const playAudio = async () => {
            try {
                await audio.play();
            } catch (error) {
                document.body.addEventListener('click', function initAudio() {
                    audio.play();
                    document.body.removeEventListener('click', initAudio);
                }, { once: true });
            }
        };
        
        audio.addEventListener('canplay', playAudio);
        audio.load();
    });
</script>

<style>
    
                                body {
    font-family: 'Poppins', sans-serif;
    overflow: hidden;
    cursor: default;
    overscroll-behavior-y: contain;
}

#hearts-area {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
}

.heart-target {
    position: absolute;
    /* MODIFICAR: Tama√±o de los corazones en m√≥vil */
    width: 50px;
    height: 50px;
    transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55), opacity 0.3s ease;
    z-index: 15;
}

.heart-target.exploded {
    opacity: 0;
    transform: scale(0);
}

#bow-container {
    position: absolute;
    /* MODIFICAR: Posici√≥n del arco en m√≥vil */
    left: 5vw;
    top: 50%;
    transform: translateY(-50%) rotate(0rad);
    width: 100px;
    height: 200px;
    z-index: 20;
    transform-origin: 30% 50%;
    transition: transform 0.3s ease-out;
}

#bow {
    width: 100%;
    height: 100%;
}

#arrow {
    position: absolute;
    top: 50%;
    /* MODIFICAR: Posici√≥n de la flecha en m√≥vil */
    left: calc(5vw + 45px);
    transform: translateY(-50%) rotate(0rad);
    width: 100px;
    height: 20px;
    cursor: grab;
    z-index: 21;
    transform-origin: 0% 50%;
    transition: transform 0.1s ease-out, left 0.5s linear, top 0.5s linear, opacity 0.5s;
}

#arrow.dragging {
    cursor: grabbing;
}

#message {
    font-family: 'Pacifico', cursive;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.8);
    opacity: 0;
    transition: opacity 0.4s ease, transform 0.4s ease;
    z-index: 30;
    pointer-events: none;
    background-color: rgba(255, 255, 255, 0.6);
    backdrop-filter: blur(5px);
    padding: 1rem 1.5rem;
    border-radius: 20px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    text-align: center;
}

#message.visible {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
}

canvas {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 10;
}

#start-modal {
    transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.4s ease;
}

/* Estilos para pantallas grandes (escritorio) */
@media (min-width: 640px) {
    .heart-target {
        /* MODIFICAR: Tama√±o de los corazones en escritorio */
        width: 80px;
        height: 80px;
    }

    #bow-container {
        /* MODIFICAR: Posici√≥n del arco en escritorio */
        left: 10vw;
    }

    #arrow {
        /* MODIFICAR: Posici√≥n de la flecha en escritorio */
        left: calc(10vw + 45px);
    }

    #message {
        padding: 2rem 3rem;
    }
}
                            </style>

<audio id="backgroundMusic" loop style="display: none;">
    <source src="https://javier1500x.github.io/Educ-In/Chino%20&%20Nacho%20-%20Ni%C3%B1a%20Bonita.mp3" type="audio/mpeg">
    
</audio>


</body>
</html>